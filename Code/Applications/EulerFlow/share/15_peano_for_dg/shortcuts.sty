% 
\makeatletter
\def\namedlabel#1#2{\begingroup
    #2%
    \def\@currentlabel{#2}%
    \phantomsection\label{#1}\endgroup
}
\makeatother

\newcommand\inlineeqno{\stepcounter{equation}\ (\theequation)}

\newcommand{\probref}[1]{\text{problem }\eqref{#1}}
\newcommand{\eqnref}[1]{\text{equation }\eqref{#1}}
\newcommand{\eqnsref}[1]{\text{equations }\eqref{#1}}
\newcommand{\chapref}[1]{chapter \ref{#1}}
\newcommand{\secref}[1]{section \ref{#1}}
\newcommand{\appchapref}[1]{appendix \ref{#1}}
\newcommand{\subsecref}[1]{subsection \ref{#1}}
\newcommand{\figref}[1]{\text{figure }\ref{#1}}

% general
\newcommand{\mathbfit}[1]{{\boldsymbol {\mathit{#1}}}}
\newcommand{\ubar}[1]{\underaccent{\bar}{#1}}

% math general
\newcommand{\isdef}{:=}
\newcommand{\partialup}{\partial}
\newcommand{\idx}[1]{\textup{#1}}
%\newcommand{\partialup}{\text{\rotatebox[origin=t]{18}{\scalebox{0.95}[1]{$\partial$}}}}

% theorem environments
% \theoremstyle{definition}
% \theorembodyfont{\itshape}      % try commenting this line
% \theoremprework{}       % code to process before the theorem
% \theorempostwork{}      % code to process after the theorem
% \theoremseparator{:}    % could be a : for example
\newtheorem{theorem}{Theorem}[chapter]
% %\newtheorem{lemma}[theorem]{Lemma}
% \newtheorem{problem}[theorem]{Problem}
\newtheorem{remark}[theorem]{Remark}
% \newtheorem{assumption}[theorem]{Assumption}
% \newtheorem{remark}[theorem]{Remark}
% 
% \newcommand{\qedhere}{\ifmmode\qed\else\hfill\proofSymbol\fi}
% \theoremstyle{nonumberplain}
% \theoremheaderfont{\itshape}
% \theorembodyfont{\normalfont}
% \theoremsymbol{\ensuremath{\square}}
% \qedsymbol{\ensuremath{\square}}


% vectors, matrices
\newcommand{\scal}[1]{\mathit{#1}}
\renewcommand{\vec}[1]{{\boldsymbol #1}}
\newcommand{\gvec}[1]{{\boldsymbol #1}}
\newcommand{\mat}[1]{{\boldsymbol #1}}
\newcommand{\matel}[3]{#1_{#2\,#3}}
\newcommand{\gmat}[1]{{\boldsymbol #1}}
\newcommand{\vecel}[2]{\mathit{#1}_{#2}}
\newcommand{\gmatel}[3]{#1_{#2\,#3}}
\newcommand{\transp}{^\textrm{T}}
\newcommand{\trace}{\text{tr}}
\newcommand{\nullvec}{\mathbf{0}}

% analysis
\newcommand{\suprem}[1]{\textup{sup}_{#1}}

% linear algebra
\newcommand{\laVec}[1]{\underline{\mathrm{#1}}}
\newcommand{\laVecel}[1]{\mathrm{#1}}
\newcommand{\laMat}[1]{\underline{\mathrm{#1}}}
% geometry
\newcommand{\xvec}{\vec{x}}
\newcommand{\point}{\vec{x}}
\newcommand{\domain}{\Omega}
\newcommand{\domainClosed}{\overline{\domain}}
\newcommand{\boundary}{{\partialup\domain}}
\newcommand{\boundaryIn}{{\boundary_{-}}}
\newcommand{\boundaryOut}{{\boundary_{+}}}
\newcommand{\inDomain}{\textup{in }\domain}
\newcommand{\onBoundary}{\textup{on }\boundary}
\newcommand{\inflow}{j}
\newcommand{\normal}{\mathbfit{n}}
\newcommand{\normalT}[1]{\vecel{n}{#1}}
\newcommand{\tangential}{\mathbfit{t}}
\newcommand{\tangentialT}[1]{\vecel{t}{#1}}

% mesh 
\newcommand{\triaClosed}{\bar{\mathcal{E}}_h}
\newcommand{\tria}{\mathcal{T}_h}
\newcommand{\cell}{K}
\newcommand{\Ncell}{{N_{\cell}}}
\newcommand{\cellClosed}{\bar{\cell}}
\newcommand{\cellNormal}[1]{\mathbfit{n}^{{#1}}}
\newcommand{\cellNormalT}[2]{n_{#2}^{{#1}}}
\newcommand{\cellTangent}[1]{\mathbfit{t}^{{#1}}}
\newcommand{\cellTangentT}[2]{t_{#2}^{{#1}}}
\newcommand{\cellPlus}{{\cell^+}}
\newcommand{\cellMinus}{{\cell^-}}
\newcommand{\cellBnd}{{\partialup\cell}}
\newcommand{\cellBndPlus}{{\partialup\cellPlus}}
\newcommand{\cellBndMinus}{{\partialup\cellMinus}}
\newcommand{\face}{e}
\newcommand{\nCellFaces}{{N_\face}}
\newcommand{\skeleton}{\Gamma}
\newcommand{\internalFaces}{\Gamma_h}
\newcommand{\skeletonD}{{\skeleton_\textup{D}}}
\newcommand{\skeletonN}{{\skeleton_\textup{N}}}
\newcommand{\skeletonM}{{\skeleton_\textup{n}}}
\newcommand{\sumDim}{\sum_{i=1}^d}
\newcommand{\sumDims}{\sum_{i,\idx{j}=1}^d}
\newcommand{\sumCellFaces}{\sum_{i=1}^{\nCellFaces}}
\newcommand{\sumCells}{\sum_{\cell \in \tria}}
\newcommand{\sumInternalFaces}{\sum_{\face\in\internalFaces}}
\newcommand{\sumSkeletonD}{\sum_{\face\in\skeletonD}}
\newcommand{\sumSkeletonM}{\sum_{\face\in\skeletonM}}
\newcommand{\sumSkeletonN}{\sum_{\face\in\skeletonN}}
\newcommand{\sumFaces}{\sum_{\face \in \internalFaces \cup \skeletonD}}
\newcommand{\sumFacesImpl}{\sum_{\face \in \internalFaces \cup \skeletonD \cup \skeletonM}}
\newcommand{\sumNeumann}{\sum_{\face \in \boundaryN}}
\newcommand{\hmax}{h_\textup{max}}
\newcommand{\hcell}{h_\cell}
\newcommand{\hcellPlus}{h_\cellPlus}
\newcommand{\hcellMinus}{h_\cellMinus}
\newcommand{\hface}{h_\face}
\newcommand{\kmax}{k_\textup{max}}
\newcommand{\kface}{k}
\newcommand{\kcell}{k}
\newcommand{\kcellPlus}{k}
\newcommand{\kcellMinus}{k}
\newcommand{\lcell}{l_\cell}

% integration
\newcommand{\dV}{\text{d}\vec{x}}
\newcommand{\ds}{\text{d}s}
\newcommand{\intDomain}{\int_\domain}
\newcommand{\intBoundary}{\int_\boundary}
\newcommand{\intCell}{\int_\cell}
\newcommand{\intFace}{\int_\face}

% mapping
\newcommand{\refVec}[1]{\hat{\vec{#1}}}
\newcommand{\refCell}{\hat{\cell}}
\newcommand{\refCellBnd}{\partial\hat{\cell}}
\newcommand{\refFace}{\hat{\face}}
\newcommand{\mapping}{\vec{F}_{\cell}}
\newcommand{\mappingT}[1]{F_{\cell,#1}}
\newcommand{\imapping}{\vec{F}^{-1}_{\cell}}
\newcommand{\jacobian}{\textup{D}\vec{F}_{\cell}}
\newcommand{\jacobianT}[2]{\frac{\partialup F_{\cell,#1}}{\partialup {#2}}}
\newcommand{\detJ}{J_\cell}
\newcommand{\ijacobian}{\textup{D}\vec{F}_{\cell}^{-1}}
\newcommand{\intRefCell}{\int_{\hat{\cell}}}
\newcommand{\refdV}{\textup{d}\hat{\vec{x}}}
\newcommand{\refdx}{\textup{d}\hat{x}}
\newcommand{\refdy}{\textup{d}\hat{y}}

% function spaces
\newcommand{\diffVecTwoZero}[1]{\mathbfit{C}^2_{0}(#1)}
\newcommand{\diffVec}[2]{\mathbfit{C}^{#1}(#2)}
\newcommand{\spaceV}{\mathbfit{V}}
\newcommand{\spaceVhf}{\mathbfit{V}_{k}}
\newcommand{\spaceVhi}[1]{\mathbfit{V}_{#1}}
\newcommand{\spaceVh}{\mathbfit{V}(h,k)}
\newcommand{\spaceVhMock}{\mathbfit{V}_h}
\newcommand{\sobolevOneZero}[1]{{H^1_{0}(#1)}}
\newcommand{\sobolev}[2]{\mathit{H}^{#1}(#2)}
\newcommand{\sobolevIn}[2]{\mathit{H}_{-}^{#1}(#2)}
\newcommand{\sobolevVec}[2]{\mathbfit{H}^{#1}(#2)}
\newcommand{\sobolevHalf}[1]{\mathit{H}^{{1}/{2}}(#1)}
\newcommand{\sobolevVecBnd}[3]{\mathbfit{H}^{#1}_{#2}(#3)}
\newcommand{\sobolevVecHalf}[1]{\mathbfit{H}^{{1}/{2}}(#1)}
\newcommand{\sobolevVecOne}[1]{\mathbfit{H}^1(#1)}
\newcommand{\sobolevVecOneZero}[1]{{\mathbfit{H}^1_{0}(#1)}}
\newcommand{\sobolevVecOneZeroD}[1]{{\mathbfit{H}^1_{0,D}(#1)}}
\newcommand{\sobolevVecBrokenZero}[1]{{\mathbfit{H}^{3/2}_{0}(#1)}}
\newcommand{\spaceQ}{M}
\newcommand{\spaceQhf}{\mathit{M}_{k-1}}
\newcommand{\spaceMh}[1]{\textit{X}_{#1}(\tria)}
\newcommand{\spaceMhs}{\mathit{X}_h}

\newcommand{\norm}[1]{\|{#1}\|}
%\newcommand{\trinorm}[1]{{\left\vert\kern-0.25ex\left\vert\kern-0.25ex\left\vert
%#1 \right\vert\kern-0.25ex\right\vert\kern-0.25ex\right\vert}}
\newcommand{\trinorm}[1]{{\vert\kern-0.25ex\vert\kern-0.25ex\vert
#1 \vert\kern-0.25ex\vert\kern-0.25ex\vert}}
\newcommand{\semiNorm}[1]{|{#1}|}
\newcommand{\normSpaceV}[1]{\norm{\vec{#1}}_\spaceV}
\newcommand{\normSpaceQ}[1]{\norm{#1}_\spaceQ}
\newcommand{\lebesgueTwo}[1]{{L^2 (#1)}}
\newcommand{\lebesgueTwoZero}[1]{L^2_\diamond (#1)}
\newcommand{\lebesgueTwoVec}[1]{\mathbfit{L}^2 (#1)}
\newcommand{\normLebesgueTwo}[2]{\norm{#1}_{\lebesgueTwo{#2}}}
\newcommand{\normSobolev}[3]{\norm{#1}_{#2,#3}}
\newcommand{\normSobolevVec}[3]{\norm{#1}_{\sobolevVec{#2}{#3}}}
\newcommand{\semiNormSobolev}[3]{\semiNorm{#1}_{\sobolev{#2}{#3}}}
\newcommand{\semiNormSobolevVec}[3]{\semiNorm{#1}_{\sobolevVec{#2}{#3}}}
\newcommand{\normEnergy}[1]{\norm{#1}_{\mathcal{E}}}
\newcommand{\normZero}[1]{\norm{#1}_{0,h}}
\newcommand{\normh}[1]{\norm{#1}_{1,h}}
\newcommand{\normhAniso}[1]{\norm{#1}_{1,\textup{tr}}}
\newcommand{\normhh}[1]{\trinorm{#1}_{1,h}}

%% dg
% From: http://http://tex.stackexchange.com/questions/100966/defining-scalable-white-curly-brackets-and-and
\newcommand*{\llbrace}{%
  \BeginAccSupp{method=hex,unicode,ActualText=2983}%
    \textnormal{\usefont{OMS}{lmr}{m}{n}\char102}%
    \mathchoice{\mkern-7.22mu}{\mkern-7.22mu}{\mkern-7.5mu}{\mkern-8.1mu}%
    \textnormal{\usefont{OMS}{lmr}{m}{n}\char102}%
  \EndAccSupp{}%
}
\newcommand*{\rrbrace}{%
  \BeginAccSupp{method=hex,unicode,ActualText=2984}%
    \textnormal{\usefont{OMS}{lmr}{m}{n}\char103}%
    \mathchoice{\mkern-7.22mu}{\mkern-7.22mu}{\mkern-7.5mu}{\mkern-8.1mu}%
    \textnormal{\usefont{OMS}{lmr}{m}{n}\char103}%
  \EndAccSupp{}%
}
%\newcommand{\avg}[1]{\ensuremath{ \{\!\{ #1 \}\!\}}}
\newcommand{\avg}[1]{\ensuremath{\llbrace{#1}\rrbrace}}
\newcommand{\normalPlus}{n^{\cellPlus}_j}
\newcommand{\jmp}[1]{\ensuremath{\llbracket{#1}\rrbracket}}
\newcommand{\matJmp}[1]{\gmat{\jmp{#1}}}
\newcommand{\vecJmp}[1]{{\boldsymbol {\jmp{#1}}}}
\newcommand{\flux}[1]{\hat{#1}}
\newcommand{\vecFlux}[1]{{\boldsymbol \flux{#1}}}
\newcommand{\penal}{\sigma_{\face}}
\newcommand{\penalt}{\delta_{\face}}

% basis
\newcommand{\phiCell}[2]{\phi^{#1}_{#2}}

\newcommand{\NphiCell}{N_\textup{basis}}